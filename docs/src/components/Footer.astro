---
import DefaultFooter from '@astrojs/starlight/components/Footer.astro';
---

<DefaultFooter {...Astro.props} />

<script>
    // Dynamically update sponsor logos based on theme
    document.addEventListener('DOMContentLoaded', () => {
        const updateSponsorLogos = () => {
            const isDarkMode = document.documentElement.classList.contains('dark');
            const logos = document.querySelectorAll('.sponsor-logo');
            
            logos.forEach(img => {
                const lightSrc = img.getAttribute('data-light-src');
                const darkSrc = img.getAttribute('data-dark-src');
                
                img.src = isDarkMode ? darkSrc : lightSrc;
            });
        };

        // Initial update
        updateSponsorLogos();

        // Watch for theme changes
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    updateSponsorLogos();
                }
            });
        });

        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['class']
        });
    });
</script>

<section class="sponsors">
    <p class="sponsors-heading">A big thank you to our sponsors</p>
    <div class="sponsors-logos">
        <a href="https://bairesdev.com/sponsoring-open-source-projects/?utm_source=conversejs" target="_blank" rel="noopener">
            <img class="sponsor-logo" data-light-src="https://conversejs.org/media/logos/BairesDev_logo-orange.png" data-dark-src="https://conversejs.org/media/logos/bairesdev-dark.png" alt="BairesDev" />
        </a>
        <a href="https://blokt.com?utm_source=conversejs" target="_blank" rel="noopener">
            <img class="sponsor-logo" data-light-src="https://conversejs.org/media/logos/blokt.png" data-dark-src="https://conversejs.org/media/logos/blokt-invert.png" alt="Blokt Crypto & Privacy" />
        </a>
        <a href="https://www.litslink.com?utm_source=conversejs" target="_blank" rel="noopener">
            <img class="sponsor-logo" data-light-src="https://conversejs.org/media/logos/litslink-light.svg" data-dark-src="https://conversejs.org/media/logos/litslink-dark.svg" alt="LITSLINK software development" />
        </a>
        <a href="https://www.keycdn.com?utm_source=conversejs" target="_blank" rel="noopener">
            <img class="sponsor-logo" data-light-src="https://conversejs.org/logo/keycdn.png" data-dark-src="https://conversejs.org/logo/keycdn.png" alt="KeyCDN" />
        </a>
        <a href="https://weblate.org?utm_source=conversejs" target="_blank" rel="noopener">
            <img class="sponsor-logo" data-light-src="https://conversejs.org/logo/weblate-button.svg" data-dark-src="https://conversejs.org/logo/weblate-button.svg" alt="Weblate" />
        </a>
    </div>
    <p class="sponsors-cta">
        If you'd like to sponsor this project, please visit
        <a href="https://github.com/sponsors/jcbrand" target="_blank" rel="noopener">Github</a>,
        <a href="https://www.patreon.com/jcbrand" target="_blank" rel="noopener">Patreon</a>,
        <a href="https://liberapay.com/jcbrand" target="_blank" rel="noopener">Liberapay</a> or
        <a href="https://opkode.com/contact.html" target="_blank" rel="noopener">contact us</a>.
    </p>
</section>

<style>
    .sponsors {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--sl-color-gray-5);
        text-align: center;
    }

    .sponsors-heading {
        font-size: var(--sl-text-base);
        font-weight: 600;
        margin-bottom: 1rem;
    }

    .sponsors-logos {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 1rem;
    }

    .sponsors-logos a {
        display: inline-block;
    }

    .sponsors-logos img {
        max-width: 10em;
        max-height: 2.5em;
        object-fit: contain;
    }

    .sponsors-cta {
        font-size: var(--sl-text-sm);
        color: var(--sl-color-gray-3);
    }

    .sponsors-cta a {
        color: var(--sl-color-text-accent);
    }
</style>
